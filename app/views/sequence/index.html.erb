<%= form_for @note, remote: true do |f| %>
  <%= f.text_field :value %>
  <%= f.submit %>
<% end %>
<%= button_to 'Play', sequence_play_path(@sequence), class: 'start_button', remote: true %>
<%= button_to 'Stop', sequence_stop_path(@sequence), class: 'stop_button', remote: true %>
<%= button_to 'Reset', sequence_reset_sequence_path(@sequence), class: 'stop_button', remote: true%>
<%#= button_to 'Record', sequence_record_path(@sequence), remote: true%>
<%#= button_to 'Stop Recording', sequence_stop_record_path(@sequence), remote: true%>

<div class="octaves">
  <p>octave:</p>
  <%= radio_button_tag 'octave', '1' %> 1
  <%= radio_button_tag 'octave', '2' %> 2
  <%= radio_button_tag 'octave', '3' %> 3
  <%= radio_button_tag 'octave', '4' %> 4
  <%= radio_button_tag 'octave', '5' %> 5
</div>

<div id="input-board">
  <% 13.times do |i| %>
    <% if i == 12 %>
      <% @octave += 1 %>
    <% end %>
    <%= link_to notes_path(note: {value: "#{@scale[i] + @octave.to_s}"}), method:'post', remote:true do %>
      <% if @scale[i].split('').last == '#' %>
        <div class="black-keys" id='trigger<%= i %>'>
          <h3 class="key-letters"><%= @scale[i] + @octave.to_s %></h3>
        </div>
      <% else %>
        <div class="white-keys" id='trigger<%= i %>'>
          <h3 class="key-letters"><%= @scale[i] + @octave.to_s %></h3>
        </div>
      <% end %>
    <% end %>
  <% end %>
</div>

<div id="sequence-info"></div>

<script>
  $(function(){
    $("input[name=octave]").change(function(){
      var root_path = "<%= root_path %>"
      var url = root_path + "?octave=" + $(this).val();
      window.location.replace(url);
    });

    $('#sequence-info').text('');
    '<% @sequence.notes.each do |note| %>'
      $('#sequence-info').append("<%= note.value %> ");
    '<% end %>'
  });
</script>
